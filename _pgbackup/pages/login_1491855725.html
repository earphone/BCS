<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <meta name="description" content=""> 
        <meta name="author" content=""> 
        <title>BCS Webapp Login</title>         
        <!-- Bootstrap Core CSS -->         
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> 
        <!-- MetisMenu CSS -->         
        <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet"> 
        <!-- Custom CSS -->         
        <link href="../dist/css/sb-admin-2.css" rel="stylesheet"> 
        <!-- Custom Fonts -->         
        <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"> 
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->         
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->         
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->         
    </head>     
    <body> 
        <div class="container"> 
            <div class="row"> 
                <h2 class="text-center bg-primary" id="welcome_banner">WELCOME <br>to the BCS Webapp!<br></h2> 
                <div class="col-md-4 col-md-offset-4"> 
                    <div class="login-panel panel panel-default"> 
                        <div class="panel-heading"> 
                            <h3 class="panel-title">Please Sign In</h3> 
                        </div>                         
                        <div class="panel-body" id="login-form"> 
                            <fieldset> 
                                <form id="form"> 
                                    <div class="form-group"> 
                                        <input class="form-control" placeholder="E-mail" name="email" type="email" autofocus id="email"> 
                                    </div>                                     
                                    <div class="form-group"> 
                                        <input class="form-control" placeholder="Password" name="password" type="password" value="" id="password"> 
                                    </div>
                                </form>
                                <!--div class="checkbox">
                                    </form>
                                    <label> 
                                    <input name="remember" type="checkbox" value="Remember Me">Remember Me
                                    </label>
                                    </div-->
                                <button type="button" class="btn btn-lg btn-success btn-block" id="login-button" onclick="loginUser()">LOGIN</button>
                            </fieldset>
                            <h5 id="forgot-password">Forgot Password?</h5> 
                            <a href="signup.html"><h5 id="sign-up"> 
                                Sign Up!</h5></a> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Firebase Initialization -->
        <script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyA55RJ8kvG-n-UClBQSNjnjLK3dvb1vwd8",
                authDomain: "bcs-webapp.firebaseapp.com",
                databaseURL: "https://bcs-webapp.firebaseio.com",
                storageBucket: "bcs-webapp.appspot.com",
                messagingSenderId: "664106049370"
            };
            firebase.initializeApp(config);
        </script>
        <!-- Firebase Create User -->         
        <script>
        function loginUser() {
            console.log("Hello: " + "email: " + email.value + " pw: " + password.value);
            firebase.auth().signInWithEmailAndPassword(email.value, password.value).catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              // ...
              alert("The following error occured: " + errorMessage);
            });
            
            // Send User to index when logged in
            firebase.auth().onAuthStateChanged(user => {
              if(user) {
                console.log("user: " + user);
                window.location = 'index.html';
              }
            });
        }
        </script>
        <!-- jQuery -->
        <script src="../vendor/jquery/jquery.min.js"></script>
        <!-- Bootstrap Core JavaScript -->
        <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
        <!-- Metis Menu Plugin JavaScript -->
        <script src="../vendor/metisMenu/metisMenu.min.js"></script>
        <!-- Custom Theme JavaScript -->
        <script src="../dist/js/sb-admin-2.js"></script>
    </body>
</html>
